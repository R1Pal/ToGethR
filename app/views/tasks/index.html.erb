

<div class="container">

  <div class="my-tasks" data-bs-toggle="collapse" data-bs-target="#collapsePendingTasks" aria-expanded="false" aria-controls="collapsePendingTasks">
    <p class="m-0 p-3">My pending tasks</p>
  </div>
  <div class="w-100 p-0 border-0 collapse" id="collapsePendingTasks">
    <% @my_pending_tasks.each do |pending_task| %>
      <div class="border d-flex justify-content-between align-items-center p-3 shadow-sm">
        <span><%= cl_image_tag pending_task.user.photo.key, height: 50, width: 50, crop: :fill, class:"rounded-circle" %></span>
        <span><%= pending_task.title %></span>
        <span><%= pending_task.date.strftime('%b %d, %Y') %></span>
        <i class="fa-solid fa-circle-dot"></i>
      </div>
    <% end %>
  </div>

        <div data-controller="task-container" class="task-container mt-5">
          <div class="d-flex justify-content-center align-items-center">
            <%= simple_form_for :my_params, url: tasks_path, method: :get, html: {class:
              "mb-3 row row-cols-auto", data: {task_container_target: "form"} } do |f| %>
              <%= f.input :assigned_to,
                         collection: [current_user.nickname, @partner.nickname, "any"],
                         selected: current_user.nickname,
                         label: "Assigned to",
                         input_html: { data: { task_container_target: "assignInput", action: "change->task-container#reveal"} } %>
              <%= f.input :status,
                        collection: ["pending", "done"],
                        selected: "pending",
                        label: "Status",
                        input_html: { data: { task_container_target: "statusInput", action: "change->task-container#reveal" } } %>
            <% end %>
        </div>

        <div class="row">
          <%= render 'tasks/content', tasks: @tasks %>
        </div>
      </div>

    </div>

    <div class="d-flex justify-content-around align-items-center">
      <a class="btn btn-primary rounded-circle" data-bs-toggle="modal" data-bs-target="#addTaskModal"><i class="fa-solid fa-plus"></i></a>
       <%= render 'tasks/add_task_modal', task: @task %>
      <a class="btn btn-primary rounded-circle"><i class="fa-solid fa-list"></i></a>
    </div>

  </div>
</div>
